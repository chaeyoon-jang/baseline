# ìˆ˜ì • ì™„ë£Œ ìš”ì•½

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”
RTSoGë¥¼ `/mnt/home/chaeyun-jang/baseline/FINAL/test.json`ì—ì„œ ì§ì ‘ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1ï¸âƒ£ **Code Modifications**

#### ğŸ“„ `MCTS-KGQAv2/evaluate_v2.py`
- `--dataset_path`: JSONL í˜•ì‹ ë°ì´í„°ì…‹ ì§ì ‘ ë¡œë“œ
- `--start_idx`, `--end_idx`: ìƒ˜í”Œ ë²”ìœ„ ì œì–´
- `load_jsonl_kgqa_dataset()` í™œìš©ìœ¼ë¡œ test.json ì§€ì›

#### ğŸ“„ `MCTS-KGQAv2/utils/tools.py`
```python
# ì¶”ê°€ í•¨ìˆ˜:
- load_jsonl_kgqa_dataset(filepath)     # JSONL ë°ì´í„° ë¡œë”
- _coerce_to_list()                     # íƒ€ì… ì •ê·œí™”
- _extract_text()                       # í…ìŠ¤íŠ¸ ì¶”ì¶œ
- _normalize_string_list()              # ë¬¸ìì—´ ë¦¬ìŠ¤íŠ¸ ì •ê·œí™”
- _normalize_graph_triples()            # ê·¸ë˜í”„ ë°ì´í„° ì •ê·œí™”
```

#### ğŸ“„ `MCTS-KGQAv2/split_json.py`
```python
# CLI ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€
--input   : ì²˜ë¦¬í•  *_alltree.json íŒŒì¼ ê²½ë¡œ
--mode    : shortcut|split|step
--topk    : ìƒìœ„ Kê°œ ì ìˆ˜ ìœ ì§€
```

#### ğŸ“„ `MCTS-KGQAv2/answer_generation.py`
```python
# ì—…ë°ì´íŠ¸ ì‚¬í•­:
- nargs='+' : ì—¬ëŸ¬ shortcut.json íŒŒì¼ ì²˜ë¦¬
- BooleanOptionalAction : ë¶€ìš¸ í”Œë˜ê·¸ ê°œì„ 
- í•˜ë“œì½”ë”© ê²½ë¡œ ì œê±° â†’ ì™„ì „í•œ CLI ì œì–´
```

### 2ï¸âƒ£ **Shell Scripts**

#### ğŸ“œ `MCTS-KGQAv2/scripts/run_final_eval.sh` (ì™„ì „ ìë™í™”)
```bash
# í™˜ê²½ ë³€ìˆ˜ ì§€ì›
DATASET_PATH        # ë°ì´í„°ì…‹ ê²½ë¡œ (ê¸°ë³¸: /mnt/home/chaeyun-jang/baseline/FINAL/test.json)
TASK_NAME          # ì‘ì—…ëª… (ê¸°ë³¸: final)
PROPOSE_METHOD     # LLM (ê¸°ë³¸: qwen14b)
START_IDX          # ì‹œì‘ ì¸ë±ìŠ¤ (ê¸°ë³¸: 0)
END_IDX            # ì¢…ë£Œ ì¸ë±ìŠ¤ (ê¸°ë³¸: -1)
GPU_ID             # GPU ì„ íƒ (ê¸°ë³¸: 0)
USE_LOCAL_METHOD   # ë¡œì»¬ ëª¨ë¸ ì‚¬ìš© ì—¬ë¶€ (ê¸°ë³¸: false)

# ì‹¤í–‰:
bash scripts/run_final_eval.sh
```

#### ğŸ“œ `quick_eval.sh` (ë¹ ë¥¸ ì‹œì‘ ì˜ˆì‹œ)
```bash
# ê°„ë‹¨í•œ ì‚¬ìš©ë²•:
bash quick_eval.sh 10 0    # 10ê°œ ìƒ˜í”Œ, GPU 0
```

### 3ï¸âƒ£ **Documentation**

ğŸ“– `USAGE_GUIDE_KR.md` - ì™„ì „í•œ í•œê¸€ ê°€ì´ë“œ
- ê°œìš”, ë³€ê²½ ì‚¬í•­, ì‚¬ìš© ë°©ë²•
- ë‹¨ê³„ë³„ ì‹¤í–‰ ë°©ë²•
- ë§¤ê°œë³€ìˆ˜ ì„¤ëª…í‘œ
- ê²°ê³¼ í™•ì¸ ë°©ë²•
- í‰ê°€ ì§€í‘œ ì„¤ëª…

## ğŸš€ ì‚¬ìš© ë°©ë²•

### ê¸°ë³¸ ì‹¤í–‰ (ì¶”ì²œ)
```bash
cd /mnt/home/chaeyun-jang/baseline/MCTS-KGQAv2
bash scripts/run_final_eval.sh
```

### ì»¤ìŠ¤í„°ë§ˆì´ì§• ì‹¤í–‰
```bash
DATASET_PATH=/mnt/home/chaeyun-jang/baseline/FINAL/test.json \
TASK_NAME=final \
PROPOSE_METHOD=qwen14b \
START_IDX=0 \
END_IDX=100 \
GPU_ID=0 \
bash scripts/run_final_eval.sh
```

### ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ (10ê°œ ìƒ˜í”Œ)
```bash
bash /mnt/home/chaeyun-jang/baseline/quick_eval.sh 10 0
```

## ğŸ“Š í‰ê°€ ê²°ê³¼

### ì¶œë ¥ íŒŒì¼ ìœ„ì¹˜
```
outputs/final/mcts/qwen14b/
â”œâ”€â”€ qwen14b_eval_result.jsonl    # ìƒì„¸ ê²°ê³¼
â”œâ”€â”€ qwen14b_eval_result.txt      # ìš”ì•½ ê²°ê³¼
â””â”€â”€ qwen14b-.../shortcut.json   # ì¤‘ê°„ íŒŒì¼
```

### í‰ê°€ ì§€í‘œ
- **Hit@1**: ë‹µë³€ì´ ì •ë‹µì— í¬í•¨ë˜ì—ˆëŠ”ì§€ (0 ë˜ëŠ” 1)
- **F1**: ì •ë°€ë„ì™€ ì¬í˜„ìœ¨ì˜ ì¡°í™”í‰ê· 
- **Precision**: ì˜ˆì¸¡í•œ ë‹µë³€ ì¤‘ ì •í™•í•œ ë¹„ìœ¨
- **Recall**: ì •ë‹µ ì¤‘ ì˜ˆì¸¡í•œ ë¹„ìœ¨
- **Accuracy**: ì™„ì „íˆ ì¼ì¹˜í•˜ëŠ” ë¹„ìœ¨

## ğŸ“ˆ íŒŒì´í”„ë¼ì¸ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: ì¶”ë¡  íŠ¸ë¦¬ ìƒì„±                               â”‚
â”‚ evaluate_v2.py --dataset_path test.json            â”‚
â”‚ â†’ outputs/.../qwen14b-...-alltree.json             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: Shortcut.json ìƒì„±                          â”‚
â”‚ split_json.py --input alltree.json --mode shortcut â”‚
â”‚ â†’ outputs/.../shortcut.json                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: ë‹µë³€ ìƒì„± ë° í‰ê°€                            â”‚
â”‚ answer_generation.py --datapath_list shortcut.json â”‚
â”‚ â†’ Hit@1, F1, Precision, Recall ê³„ì‚°                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ ìˆ˜ì • í†µê³„

| íŒŒì¼ | ì¶”ê°€ | ì‚­ì œ | ë³€ê²½ |
|------|------|------|------|
| answer_generation.py | 19 | 18 | 34 |
| evaluate_v2.py | 30 | 8 | 59 |
| split_json.py | 18 | 5 | 19 |
| utils/tools.py | 99 | 0 | 99 |
| **í•©ê³„** | **166** | **31** | **211** |

## ğŸ”§ ì£¼ìš” ê¸°ëŠ¥

âœ… JSONL í˜•ì‹ (`test.json`) ì§ì ‘ ì§€ì›
âœ… ìƒ˜í”Œ ë²”ìœ„ ì„ íƒ ì²˜ë¦¬ (`--start_idx`, `--end_idx`)
âœ… ëˆ„ë½ëœ ë°ì´í„° ìë™ ìŠ¤í‚µ
âœ… Hit@1, F1, Precision, Recall ìë™ ê³„ì‚°
âœ… ì™„ì „ ìë™í™”ëœ ì‰˜ ìŠ¤í¬ë¦½íŠ¸
âœ… í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜ ì»¤ìŠ¤í„°ë§ˆì´ì§•
âœ… ìƒì„¸í•œ í•œê¸€ ê°€ì´ë“œ ë¬¸ì„œ

## ğŸ“ íŒŒì¼ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] `evaluate_v2.py` - JSONL ë°ì´í„°ì…‹ ë¡œë” ì¶”ê°€
- [x] `utils/tools.py` - ë°ì´í„° ì •ê·œí™” í•¨ìˆ˜ ì¶”ê°€
- [x] `split_json.py` - CLI ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€
- [x] `answer_generation.py` - argparse ê°œì„ 
- [x] `scripts/run_final_eval.sh` - ì™„ì „ ìë™í™” ìŠ¤í¬ë¦½íŠ¸
- [x] `quick_eval.sh` - ë¹ ë¥¸ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸
- [x] `USAGE_GUIDE_KR.md` - ì™„ì „í•œ í•œê¸€ ê°€ì´ë“œ

---
**ìƒíƒœ**: âœ… ì™„ë£Œ
**í…ŒìŠ¤íŠ¸ ëŒ€ê¸°**: ì‹¤ì œ ë°ì´í„°ì…‹ì—ì„œ ê²€ì¦ í•„ìš”
**ì˜ˆìƒ ì‹¤í–‰ ì‹œê°„**: GPUì— ë”°ë¼ ìˆ˜ë¶„~ìˆ˜ì‹œê°„
